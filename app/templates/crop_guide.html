{% extends "base.html" %}

{% block title %}Crop Guide | SmartFarm{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/crop_guide.css') }}">
<script src="{{ url_for('static', filename='js/crop_guide.js') }}"></script>

<section class="container my-5">
  <h2 class="text-center mb-4">🌾 Crop Recommendation Guide</h2>

  <!-- Manual Entry -->
  <div class="row">
    <div class="col-md-6">
      <h4>📝 Manual Prediction</h4>
      <form action="{{ url_for('main.crop_guide') }}" method="POST" class="crop-form shadow p-4 rounded">
        <input type="hidden" name="mode" value="manual">
        <div class="mb-3">
          <label for="season" class="form-label">Season</label>
          <select name="season" id="season" class="form-select" required>
            <option value="">Select Season</option>
            <option value="Autumn">Autumn</option>
            <option value="Kharif">Kharif</option>
            <option value="Rabi">Rabi</option>
            <option value="Summer">Summer</option>
            <option value="Winter">Winter</option>
          </select>
        </div>

        <div class="mb-3">
          <label for="state" class="form-label">State</label>
          <select name="state" id="state" class="form-select" required>
            <option value="">Select State</option>
            <option value="Jammu and Kashmir">Jammu and Kashmir</option>
            <!-- Add more states -->
          </select>
        </div>

        <div class="mb-3">
          <label for="temperature" class="form-label">Temperature (°C)</label>
          <input type="number" step="0.01" name="temperature" class="form-control" required>
        </div>

        <div class="mb-3">
          <label for="humidity" class="form-label">Humidity (%)</label>
          <input type="number" step="0.01" name="humidity" class="form-control" required>
        </div>

        <!-- <div class="mb-3">
          <label for="rainfall" class="form-label">Rainfall (mm)</label>
          <input type="number" step="0.01" name="rainfall" class="form-control" required>
        </div> -->

        <button type="submit" class="btn btn-primary w-100">Predict Crop</button>
      </form>
    </div>

    <!-- Auto Entry -->
    <div class="col-md-6">
      <h4>⚡ Automatic Prediction</h4>
      <form action="{{ url_for('main.crop_guide') }}" method="POST" id="autoForm" class="crop-form shadow p-4 rounded">
        <input type="hidden" name="mode" value="auto">
        <div class="mb-3">
          <label for="auto_season" class="form-label">Season</label>
          <select name="season" id="auto_season" class="form-select" required>
            <option value="">Select Season</option>
            <option value="Autumn">Autumn</option>
            <option value="Kharif">Kharif</option>
            <option value="Rabi">Rabi</option>
            <option value="Summer">Summer</option>
            <option value="Winter">Winter</option>
          </select>
        </div>
        <input type="hidden" name="state" id="auto_state">
        <input type="hidden" name="temperature" id="auto_temp">
        <input type="hidden" name="humidity" id="auto_humidity">
        <input type="hidden" name="rainfall" id="auto_rain">

        <button type="submit" class="btn btn-success w-100" onclick="fetchWeather(event)">
          Auto Fetch & Predict
        </button>

    </div>
  </div>

  {% if predicted_crop %}
    <div class="alert alert-success text-center mt-4">
      🌱 <strong>Recommended Crop:</strong> {{ predicted_crop }}
    </div>
  {% endif %}
</section>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/crop_guide.js') }}"></script>
{% endblock %}
